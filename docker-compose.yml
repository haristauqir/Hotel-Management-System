version: "3.6"
services:
  identityapi:
    container_name: identityapi-container
    image: identity.api  
    environment:
      - ConnectionString=Server=sqldata;Initial Catalog=IdentityAPI;User Id=sa;Password=iamback.786A@
    ports:
        - 6000:80
        - 6001:443    
   
    restart: on-failure        
    depends_on:
        - sqldata
  
  sqldata:
    container_name: sqldata-container
    image:
      "mcr.microsoft.com/mssql/server"
    environment:
      - SA_PASSWORD=iamback.786A@
      - ACCEPT_EULA=Y
    ports:
      - "5434:1433"
    volumes:
      - sqlvolumehotelmanagementsystem:/var/opt/mssql
    restart: on-failure     

volumes:
  sqlvolumehotelmanagementsystem: